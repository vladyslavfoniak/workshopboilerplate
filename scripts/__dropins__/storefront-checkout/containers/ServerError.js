/*! Copyright 2025 Adobe
All Rights Reserved. */
import{jsx as o,jsxs as f}from"@dropins/tools/preact-jsx-runtime.js";import"../chunks/TermsAndConditions.js";import{classes as i}from"@dropins/tools/lib.js";import{IllustratedMessage as h,Icon as d,Button as v}from"@dropins/tools/components.js";/* empty css                             *//* empty css                      */import"../chunks/fetch-graphql.js";import{events as g}from"@dropins/tools/event-bus.js";import{s as k}from"../chunks/dom.js";import"@dropins/tools/preact-compat.js";/* empty css                  */import{S}from"../chunks/OrderError.js";import{useText as C}from"@dropins/tools/i18n.js";/* empty css                       */import{useState as E,useRef as _,useEffect as l}from"@dropins/tools/preact-hooks.js";import"@dropins/tools/signals.js";import"@dropins/tools/fetch-graphql.js";const b=({className:n,contactSupport:s,errorMessage:e,onClick:a,errorMessageRef:t})=>{const r=C({Title:"Checkout.ServerError.title",Message:"Checkout.ServerError.message",ContactSupport:"Checkout.ServerError.contactSupport",Button:"Checkout.ServerError.button"}),c=e!==""?e:r.Title;return o(h,{action:o(v,{className:i(["checkout-server-error__button"]),name:"server-error-button",onClick:a,children:r.Button}),"aria-describedby":"checkout-server-error__message","aria-invalid":"true","aria-live":"polite",className:i(["checkout-server-error",n]),"data-testid":"checkout-server-error",heading:c,icon:o(d,{className:i(["checkout-server-error__icon"]),source:S}),message:f("p",{ref:t,"data-testid":"checkout-server-error-message",id:i(["checkout-server-error__message"]),children:[r.Message,o("br",{}),o("span",{children:s??r.ContactSupport})]})})},J=({active:n=!0,onRetry:s,onServerError:e,autoScroll:a=!1})=>{const[t,r]=E(null),c=_(null),p=async()=>{s==null||s(),r(null)};return l(()=>{const u=g.on("checkout/error",m=>{r(m||null),m&&e&&e(m.message)},{eager:!0});return()=>{u==null||u.off()}},[e]),l(()=>{!a||!t||!c.current||k(c.current)},[t,a]),!n||!t?null:o(b,{errorMessage:t.message,errorMessageRef:c,onClick:p})};export{J as ServerError,J as default};
//# sourceMappingURL=ServerError.js.map
